
function MadeiroStore(){riot.observable(this);var e=this;e.POST=function(e,t,r){var n;n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState==4&&n.status==200){r(n.responseText)}};n.open("POST",e,true);n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");n.send(t)};e.GET=function(e,t){var r;r=new XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState==4&&r.status==200){t(r.responseText)}};r.open("GET",e,true);r.send()};e.stupidCommas=function(e,t,r){return _.map(t,function(t){var n;_.each(r,function(r){n=t[r].split(e);t[r]=n.join(",")});return t})};e.favorites=[];e.guestbook=[];e.library=[];e.writing=[];e.terminal=["Hello, world. Type help for more information."];e.on("reload_data",function(t){e.GET("secrets/sourcedata.php",function(r){sourceData=JSON.parse(r);e.favorites=e.stupidCommas("$",sourceData.favorites,["notes"]);e.guestbook=sourceData.guestbook;e.library=sourceData.library;e.writing=e.stupidCommas("$",sourceData.writing,["title"]);e.tools=e.stupidCommas("$",sourceData.tools,["tech"]);e.memories=e.stupidCommas("~",sourceData.memories,["title","desc"]);e.trigger("guestbook_list",e.guestbook);e.trigger("data_loaded",e.guestbook);if(typeof t!="undefined"){t()}})});e.on("load_article",function(t){var r=_.find(e.writing,{slug:t});if(!_.isNil(r)){e.GET("secrets/data/articles/"+t+".html",function(t){if(t){e.trigger("article_loaded",r.title,r.date,t)}})}else{console.log("Article doesn't exist.");e.trigger("article_loaded",null,null,null)}});e.on("terminal_init",function(){e.trigger("terminal_list",e.terminal)});e.on("terminal_clear",function(){e.terminal=[];e.trigger("terminal_list",e.terminal)});e.on("terminal_msg",function(t){e.terminal.push(t);e.trigger("terminal_list",e.terminal)});e.on("terminal_input",function(t){e.POST("secrets/terminal.php","cmd="+t,function(t){var r=t.split("_");var n=parseInt(r[0]);if(n){e.trigger("terminal_command",r[1])}else{e.terminal.push(r[1]);e.trigger("terminal_list",e.terminal)}})});e.on("tools_init",function(){e.trigger("tools_list",e.tools)});e.on("writing_init",function(){e.trigger("writing_list",e.writing)});e.on("memories_init",function(){e.trigger("memories_list",e.memories)});e.on("library_init",function(){e.trigger("library_list",e.library)});e.on("favorites_init",function(){e.trigger("favorites_list",e.favorites)});e.on("guestbook_init",function(){e.trigger("guestbook_list",e.guestbook)});e.on("guestbook_add",function(t){e.POST("secrets/guestbook-add.php","payload="+JSON.stringify(t),function(t){if(t==="added"){e.trigger("reload_data")}})})}var RiotControl={_stores:[],addStore:function(e){this._stores.push(e)},reset:function(){this._stores=[]}};["on","one","off","trigger"].forEach(function(e){RiotControl[e]=function(){var t=[].slice.call(arguments);this._stores.forEach(function(r){r[e].apply(r,t)})}});if(typeof module!=="undefined")module.exports=RiotControl;(function(e,t){if(typeof define==="function"&&define.amd){define([],t)}else if(typeof exports==="object"){var r=t();if(typeof module==="object"&&module&&module.exports){exports=module.exports=r}exports.randomColor=r}else{e.randomColor=t()}})(this,function(){var e=null;var t={};g();var r=function(t){t=t||{};if(t.seed!==undefined&&t.seed!==null&&t.seed===parseInt(t.seed,10)){e=t.seed}else if(typeof t.seed==="string"){e=v(t.seed)}else if(t.seed!==undefined&&t.seed!==null){throw new TypeError("The seed value must be an integer or string")}else{e=null}var s,u,f;if(t.count!==null&&t.count!==undefined){var l=t.count,c=[];t.count=null;while(l>c.length){if(e&&t.seed)t.seed+=1;c.push(r(t))}t.count=l;return c}s=n(t);u=i(s,t);f=o(s,u,t);return a([s,u,f],t)};function n(e){var t=u(e.hue),r=c(t);if(r<0){r=360+r}return r}function i(e,t){if(t.luminosity==="random"){return c([0,100])}if(t.hue==="monochrome"){return 0}var r=f(e);var n=r[0],i=r[1];switch(t.luminosity){case"bright":n=55;break;case"dark":n=i-10;break;case"light":i=55;break}return c([n,i])}function o(e,t,r){var n=s(e,t),i=100;switch(r.luminosity){case"dark":i=n+20;break;case"light":n=(i+n)/2;break;case"random":n=0;i=100;break}return c([n,i])}function a(e,t){switch(t.format){case"hsvArray":return e;case"hslArray":return p(e);case"hsl":var r=p(e);return"hsl("+r[0]+", "+r[1]+"%, "+r[2]+"%)";case"hsla":var n=p(e);return"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+Math.random()+")";case"rgbArray":return m(e);case"rgb":var i=m(e);return"rgb("+i.join(", ")+")";case"rgba":var o=m(e);return"rgba("+o.join(", ")+", "+Math.random()+")";default:return d(e)}}function s(e,t){var r=l(e).lowerBounds;for(var n=0;n<r.length-1;n++){var i=r[n][0],o=r[n][1];var a=r[n+1][0],s=r[n+1][1];if(t>=i&&t<=a){var u=(s-o)/(a-i),f=o-u*i;return u*t+f}}return 0}function u(e){if(typeof parseInt(e)==="number"){var r=parseInt(e);if(r<360&&r>0){return[r,r]}}if(typeof e==="string"){if(t[e]){var n=t[e];if(n.hueRange){return n.hueRange}}}return[0,360]}function f(e){return l(e).saturationRange}function l(e){if(e>=334&&e<=360){e-=360}for(var r in t){var n=t[r];if(n.hueRange&&e>=n.hueRange[0]&&e<=n.hueRange[1]){return t[r]}}return"Color not found"}function c(t){if(e===null){return Math.floor(t[0]+Math.random()*(t[1]+1-t[0]))}else{var r=t[1]||1;var n=t[0]||0;e=(e*9301+49297)%233280;var i=e/233280;return Math.floor(n+i*(r-n))}}function d(e){var t=m(e);function r(e){var t=e.toString(16);return t.length==1?"0"+t:t}var n="#"+r(t[0])+r(t[1])+r(t[2]);return n}function h(e,r,n){var i=n[0][0],o=n[n.length-1][0],a=n[n.length-1][1],s=n[0][1];t[e]={hueRange:r,lowerBounds:n,saturationRange:[i,o],brightnessRange:[a,s]}}function g(){h("monochrome",null,[[0,0],[100,0]]);h("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]);h("orange",[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]);h("yellow",[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]);h("green",[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]);h("blue",[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]);h("purple",[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]);h("pink",[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function m(e){var t=e[0];if(t===0){t=1}if(t===360){t=359}t=t/360;var r=e[1]/100,n=e[2]/100;var i=Math.floor(t*6),o=t*6-i,a=n*(1-r),s=n*(1-o*r),u=n*(1-(1-o)*r),f=256,l=256,c=256;switch(i){case 0:f=n;l=u;c=a;break;case 1:f=s;l=n;c=a;break;case 2:f=a;l=n;c=u;break;case 3:f=a;l=s;c=n;break;case 4:f=u;l=a;c=n;break;case 5:f=n;l=a;c=s;break}var d=[Math.floor(f*255),Math.floor(l*255),Math.floor(c*255)];return d}function p(e){var t=e[0],r=e[1]/100,n=e[2]/100,i=(2-r)*n;return[t,Math.round(r*n/(i<1?i:2-i)*1e4)/100,i/2*100]}function v(e){var t=0;for(var r=0;r!==e.length;r++){if(t>=Number.MAX_SAFE_INTEGER)break;t+=e.charCodeAt(r)}return t}return r});!function(e){function t(e){return e.split(/[\/?#]/)}function r(e,t){var r=RegExp("^"+t[T](/\*/g,"([^/?#]+?)")[T](/\.\./,".*")+"$"),n=e.match(r);return n?n.slice(1):void 0}function n(e,t){var r;return function(){clearTimeout(r),r=setTimeout(e,t)}}function i(e){h=n(l,1),C[w](R,h),C[w](S,h),E[w](N,c),e&&l(!0)}function o(){this.$=[],e.observable(this),j.on("stop",this.s.bind(this)),j.on("emit",this.e.bind(this))}function a(e){return e[T](/^\/|\/$/,"")}function s(e){return"string"==typeof e}function u(e){return(e||$.href)[T](b,"")}function f(e){return"#"==g[0]?(e||$.href||"").split(g)[1]||"":($?u(e):e||"")[T](g,"")}function l(e){var t,r=0==P;if(!(P>=M)&&(P++,I.push(function(){var t=f();(e||t!=m)&&(j[x]("emit",t),m=t)}),r)){for(;t=I.shift();)t();P=0}}function c(e){if(!(1!=e.which||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){for(var t=e.target;t&&"A"!=t.nodeName;)t=t.parentNode;!t||"A"!=t.nodeName||t[k]("download")||!t[k]("href")||t.target&&"_self"!=t.target||-1==t.href.indexOf($.href.match(b)[0])||(t.href==$.href||!(t.href.split("#")[0]==$.href.split("#")[0]||"#"!=g[0]&&0!==u(t.href).indexOf(g)||"#"==g[0]&&t.href.split(g)[0]!=$.href.split(g)[0])&&d(f(t.href),t.title||E.title))&&e.preventDefault()}}function d(e,t,r){return A?(e=g+a(e),t=t||E.title,r?A.replaceState(null,t,e):A.pushState(null,t,e),E.title=t,G=!1,l(),G):j[x]("emit",f(e))}var h,g,m,p,v,b=/^.+?\/\/+[^\/]+/,y="EventListener",_="remove"+y,w="add"+y,k="hasAttribute",T="replace",R="popstate",S="hashchange",x="trigger",M=3,C="undefined"!=typeof window&&window,E="undefined"!=typeof document&&document,A=C&&history,$=C&&(A.location||C.location),D=o.prototype,N=E&&E.ontouchstart?"touchstart":"click",O=!1,j=e.observable(),G=!1,I=[],P=0;D.m=function(e,t,r){!s(e)||t&&!s(t)?t?this.r(e,t):this.r("@",e):d(e,t,r||!1)},D.s=function(){this.off("*"),this.$=[]},D.e=function(e){this.$.concat("@").some(function(t){var r=("@"==t?p:v)(a(e),a(t));return void 0!==r?(this[x].apply(null,[t].concat(r)),G=!0):void 0},this)},D.r=function(e,t){"@"!=e&&(e="/"+a(e),this.$.push(e)),this.on(e,t)};var q=new o,H=q.m.bind(q);H.create=function(){var e=new o,t=e.m.bind(e);return t.stop=e.s.bind(e),t},H.base=function(e){g=e||"#",m=f()},H.exec=function(){l(!0)},H.parser=function(e,n){e||n||(p=t,v=r),e&&(p=e),n&&(v=n)},H.query=function(){var e={},t=$.href||m;return t[T](/[?&](.+?)=([^&]*)/g,function(t,r,n){e[r]=n}),e},H.stop=function(){O&&(C&&(C[_](R,h),C[_](S,h),E[_](N,c)),j[x]("stop"),O=!1)},H.start=function(e){O||(C&&("complete"==document.readyState?i(e):C[w]("load",function(){setTimeout(function(){i(e)},1)})),O=!0)},H.base(),H.parser(),e.route=H}(riot);

riot.tag2("contact",'<div class="contact cf bg-dijon" onclick="{clickFocus}"> <div class="w-100 w-25-ns bb bn-ns fl overflow-x-auto overflow-x-visible-ns horizontal-flow nowrap ws-normal-ns"> <h3 class="dn db-ns pl3 ttu f6 white fw3">Channels <span class="black-50 ml1">({_.keys(allBlurbs).length})</span></h3> <ul class="list pa0 ma0 mb4-ns dib db-ns"> <li onclick="{changeView.bind(this, \'advice\')}" class="{linkCSS}{currentView == ⁗advice⁗ ? ⁗active⁗ : ⁗⁗}"><span class="white-50 mr1">#</span>advice</li> <li onclick="{changeView.bind(this, \'tech\')}" class="dn db-ns {linkCSS}{currentView == ⁗tech⁗ ? ⁗active⁗ : ⁗⁗}"><span class="white-50 mr1">#</span>tech</li> <li onclick="{changeView.bind(this, \'work\')}" class="{linkCSS}{currentView == ⁗work⁗ ? ⁗active⁗ : ⁗⁗}"><span class="white-50 mr1">#</span>work</li> </ul> <h3 class="dn db-ns pl3 ttu f6 white fw3">Messages <span class="black-50 ml1">(1)</span></h3> <ul class="list pa0 ma0 mb3-ns dib db-ns"> <li onclick="{changeView.bind(this, \'matt\')}" class="{linkCSS}{currentView == ⁗matt⁗ ? ⁗active⁗ : ⁗⁗}">matt</li> </ul> </div> <div class="w-100 w-75-ns fl bl-ns bg-white overflow-auto" riot-style="min-height: {parent.style.height}px;"> <ol class="list pa0 ma0 pt3" if="{currentView != ⁗matt⁗}"> <li each="{blurbs}" class="cf pb1 mb3 bb b--black-20"> <div class="fl dn db-ns pa3 pt0 ma0 relative" style="width: 25%; max-width: 60px"> <img if="{author == ⁗matt⁗}" src="./icons/moi.jpg" class="absolute"> <div if="{author != ⁗matt⁗}" class=""> <i class="db" riot-style="width: 48px; height: 48px; background-color: {getRandomColor()}"></i> </div> </div> <div class="fl w-80 pl3"> <p class="pa0 b ma0 mb2">{author}</p> <p each="{msg, i in messages}" class="pa0 ma0 pb1 mb2 near-black lh-copy"> <rawhtml html="{parseMessage(msg)}"></RawHTML> </p> <p class="pa0 ma0 pb2 mb2 lh-copy" if="{final}"> {final[0]} <a class="link blue ma0 pa0" href="#" onclick="{parent.changeView.bind(parent, \'matt\')}">{final[1]}</a> </p> </div> </li> </ol> <form class="pt3 cf" if="{currentView == ⁗matt⁗}"> <div class="cf pb1 mb4 bb b--black-20"> <div class="fl dn db-ns pa3 pt0 ma0 relative" style="width: 25%; max-width: 60px"> <img src="./icons/moi.jpg" class="absolute"> </div> <div class="fl w-80 pl3"> <p class="pa0 b ma0 mb2">matt</p> <p class="pa0 ma0 pb1 mb2 near-black lh-copy measure">Thanks for reaching out! I\'ll respond to you as soon as I\'m able &mdash; typically in a few days. If you need to reach me sooner, <a class="link blue" target="_blank" href="http://twitter.com/MattMadeiro">send me a tweet</a>. If email is more your thing, however, hit me up <a class="link blue" target="_blank" href="mailto:contact@mattmadeiro.com">right here</a>.</p> </div> </div> </form> </div> </div>','contact .link-hover:hover,[data-is="contact"] .link-hover:hover{ background-color: rgba(0,0,0,.35); } contact .active,[data-is="contact"] .active{ background-color: rgba(0,0,0,.6); } contact .active.link-hover:hover,[data-is="contact"] .active.link-hover:hover{ background-color: rgba(0,0,0,.6); }',"",function(t){this.currentView=null;this.linkCSS="dib db-ns link-hover pl3 pr3 pv2 pv1-ns pointer fw3 white ";this.blurbs=[];this.allBlurbs={advice:[{author:"matt",messages:["Questions about travel? Coding? Books? Board games?"]},{author:"you",messages:["I am curious about approximately none of those things."]},{author:"matt",messages:["T-that's fine. I don't know everything, but I know enough to be dangerous."],final:["Want advice on anything? I'd love to meet you!","Hit me up."]}],tech:[{author:"matt",messages:["This site was built with <a target='_blank' class='link blue' href='http://riotjs.com'>RiotJS</a>. (Imagine React, except simpler and less terrifying). Styling is provided by <a target='_blank' class='link blue' href='http://tachyons.io'>tachyons</a>, arguably the best thing that has happened to CSS in recent memory."]},{author:"matt",final:["If you're curious about either one, or curious about how and why I used them to build this awkward, colorful thing, you know what to do.","Get in touch!"]}],work:[{author:"matt",messages:["Hey, thanks for asking!","As of November 2017, I'm leading front-end design and development of a pretty badass IoT application for Meshify in Austin, TX.","I can't stop sweating. Please send coconut water."]}]};this.changeView=function(t){this.currentView=t;this.blurbs=this.allBlurbs[t]};this.getRandomColor=function(){return randomColor({luminosity:"light"})};this.parseMessage=function(t){var e="<a href='#'>message</a>";return t.replace(/@/g,e)};this.on("mount",function(){this.changeView("advice");this.update()})});riot.tag2("documents",'<article ref="doc" class="documents overflow-y-auto cf bg-white f5 pb3 pb0-l f4-ns lh-copy avenir" if="{article.html && loaded}"> <header class="bb b--black-20 pa3"> <h1 class="mv2 f4 f2-m f1-l lh-title">{article.title}</h1> <time class="f5 gray lh-copy mb4">{article.date}</time> </header> <div class="pa3 measure-wide"> <rawhtml html="{article.html}"></RawHTML> </div> </article> <div class="pa3 tc" if="{!article.html && loaded}"> <h1 class="f2 mv2 lh-title black-90">Article not found. :(</h1> <p class="f5 gray lh-copy"> But don\'t sweat it. <span class="dn-ns">Hit the back button below to return to the full list of articles.</span> <span class="dn di-l">Why not choose one from the list over to the left?</span> </p> </div> <div class="absolute bg-light-gray bt w-100 bw1 b--black db dn-l" style="bottom: 0; left: 0"> <button class="ma0 link f4 db bg-light-gray pv1 br br0 bw1 b--black hover-invert pointer" onclick="{backToList}" style="width: 15%" aria-label="Return to Main Favorites List"> <svg class="db center icon icon-arrow-left" aria-hidden="true"><use xlink:href="#icon-arrow-left"></use></svg> </button> </div>','documents button,[data-is="documents"] button{ border-left-style: none; border-top-style: none; border-bottom-style: none; }',"",function(t){var e=this;var i=e.parent;e.article={};e.loaded=false;e.backToList=function(t){i.clickClose(t);i.parent.startApp("writing")};RiotControl.on("article_loaded",function(t,i,a){e.loaded=true;e.article={title:t,date:i,html:a};e.update()});e.on("update",function(){i.refs.container.scrollTop=0});e.on("unmount",function(){RiotControl.off("article_loaded")})});riot.tag2("favorites",'<div if="{!currentPeep}" class="favorites overflow-y-auto" riot-style="max-height: {parent.style.height}px" ref="list"> <div each="{peeps, char in byLastName}"> <p class="bg-dijon bt bb b--black-80 white pl3 pv1 ma0 f6 fw3">{char}</p> <ul class="list pa0 ma0 cf" style="-webkit-overflow-scrolling: touch;"> <li each="{peep in peeps}" onclick="{parent.showProfile}" class="peep cf w-100 bb b--black-20 pt2 pb2 pointer pl3"> <a class="db no-underline black pv1" href="#favorites">{peep.first} <span class="b">{peep.last}</span></a> </li> </ul> </div> </div> <div class="db cf overflow-y-auto" riot-style="max-height: {parent.style.height}px" if="{currentPeep}"> <article class="bg-white db"> <div class="cf pv2 bb b--light-silver"> <h2 class="f3 pl3 b mb2 pt3 mt0 black-90">{currentPeep.first + ⁗ ⁗ + currentPeep.last}</h2> <a href="http://{currentPeep.website}" target="_blank" class="pl3 pt2 pb3 db link blue fw2 mt2" if="{currentPeep.website != null}">http://{currentPeep.website}</a> <ul class="list ma0 mt1 pb3 pl3" if="{hasSocial()}"> <li class="dib mr3" if="{currentPeep.twitter}"> <a target="_blank" class="link blue f5 db" href="http://twitter.com/{currentPeep.twitter}"> <svg class="icon icon-twitter" aria-labelledby="Twitter"><use xlink:href="#icon-twitter"></use></svg> </a> </li> <li class="dib mr3" if="{currentPeep.instagram}"> <a target="_blank" class="link blue f5 db" href="http://instagram.com/{currentPeep.instagram}"> <svg class="icon icon-instagram" aria-labelledby="Instagram"><use xlink:href="#icon-instagram"></use></svg> </a> </li> <li class="dib mr3" if="{currentPeep.facebook}"> <a target="_blank" class="link blue f5 db" href="http://facebook.com/{currentPeep.facebook}"> <svg class="icon icon-facebook" aria-labelledby="Facebook"><use xlink:href="#icon-facebook"></use></svg> </a> </li> </ul> </div> <div class="cf pt1 pb4"> <h3 class="pl3 mb2 mt3 light-silver fw2 i f6">Notes</h3> <ul class="list pa0 pr3"> <li class="pl3 black-90 lh-copy measure" each="{note, i in [currentPeep.notes]}"><rawhtml html="{note}"></RawHTML></li> </ul> </div> <div class="absolute bg-light-gray bt w-100 bw1 b--black" style="bottom: 0; left: 0"> <button class="ma0 link f4 db bg-light-gray pv1 br br0 bw1 b--black hover-invert pointer" onclick="{backToList}" style="width: 15%" aria-label="Return to Main Favorites List"> <svg class="db center icon icon-arrow-left" aria-hidden="true"><use xlink:href="#icon-arrow-left"></use></svg> </button> </div> </article> </div>','favorites .peep:hover,[data-is="favorites"] .peep:hover{ background-color: #eee; } favorites button,[data-is="favorites"] button{ border-left-style: none; border-top-style: none; border-bottom-style: none; }',"",function(t){var e=this;e.peeps=[];e.byLastName={};e.lastnames=[];e.currentPeep=false;e.storedScroll=0;e.showProfile=function(t){e.storePosition();e.currentPeep=t.item.peep};e.showList=function(t){e.currentPeep=false};e.storePosition=function(){e.storedScroll=e.refs.list.scrollTop};e.hasSocial=function(){return e.currentPeep.twitter||e.currentPeep.instagram||e.currentPeep.facebook};e.checkFinal=function(){if(e.currentPeep.twitter&&e.currentPeep.instagram){return""}return"br b--light-silver"};e.backToList=function(){e.currentPeep=false};RiotControl.on("favorites_list",function(t){e.peeps=_.orderBy(t,"last","asc");e.byLastName=_.groupBy(e.peeps,function(t){return t.last.charAt(0)});if(e.isMounted){console.log(e.byLastName);e.update()}});e.on("updated",function(){if(!e.currentPeep&&e.storedScroll){e.refs.list.scrollTop=e.storedScroll;e.storedScroll=0}});e.on("mount",function(){RiotControl.trigger("favorites_init")})});riot.tag2("guestbook",'<div class="guestbook" onclick="{clickFocus}"> <div class="bg-white overflow-y-auto" riot-style="max-height: {parent.style.height}px" if="{showingList}"> <div class="tc pv3 bb b--black-80"> <notbutton title="Sign the Guest Book" onclick="{toggleView}"></NotButton> </div> <ul class="list pl0 ma0" ref="messages" if="{messages.length}"> <li each="{messages}" class="bb cf pt3 pt0-ns pl4-ns" riot-style="background-color: {color}"> <div class="pl3 pr3 w-100 fl bl-ns bg-white" style="min-height: 100px"> <p class=""><span class="b f5">{formatOutput(name)}</span><span class="light-silver fw4 ml3 f6">{formatOutput(location)}</span></p> <p class="near-black f6 pb2 pt1 lh-copy measure" style="white-space: pre-wrap">{formatOutput(message)}</p> </div> </li> </ul> <p class="tc pl3 pa0 ma0 mt4 f5 gray" if="{!messages.length}">Nothing here just yet. :(</p> </div> <div if="{!showingList}" class="cf" onclick="{chooseColor}"> <div class="pl3 pv3"> <notbutton title="Back to List" onclick="{toggleView}"></NotButton> </div> <form class="pt3"> <div class="pl3 pr3 pb2 w-100 mb3 "> <label for="author" class="db b mb1 f6 ttu">Name</label> <input onclick="{dontChangeColor}" class="input-reset pv2 ph2 w-100 ba bw1 b--black" type="text" ref="author"> </div> <div class="pl3 pr3 pb2 w-100 mb3 "> <label for="location" class="db b mb1 f6 ttu">Location</label> <input onclick="{dontChangeColor}" class="input-reset pv2 ph2 w-100 ba bw1 b--black" type="text" ref="location"> </div> <div class="pl3 pr3 pb0 pb2-l w-100 mb3 "> <label for="message" class="db b mb1 f6 ttu">Message</label> <textarea onclick="{dontChangeColor}" class="input-reset pv2 ph2 w-100 ba bw1 b--black" ref="message" style="min-height: 120px"></textarea> </div> <div class="pr3 pv3 fr"> <notbutton title="Submit" onclick="{submitForm}"></NotButton> </div> </form> </div> </div>',"","",function(t){var e=this;var i=e.parent;e.messages=[];e.authorColor=randomColor({luminosity:"light"});e.showingList=true;e.toggleView=function(t){if(typeof t!="undefined"){t.stopPropagation()}e.showingList=!e.showingList;if(e.showingList){i.refs.container.style.backgroundColor="#ffffff";e.update()}else{e.chooseColor()}};e.formValid=function(){return e.refs.author.value.length>1&&e.refs.location.value.length>1&&e.refs.message.value.length>2};e.submitForm=function(t){t.stopPropagation();t.preventDefault();if(e.formValid()){var i={name:e.escapeInput(e.refs.author.value),location:e.escapeInput(e.refs.location.value),msg:e.escapeInput(e.refs.message.value),color:e.authorColor};RiotControl.trigger("guestbook_add",i);e.refs.author.value="";e.refs.location.value="";e.refs.message.value="";e.toggleView()}};e.escapeInput=function(t){var e=t.replace(/(?:\r\n|\r|\n)/g,"<br />");return e.replace(/,/g,"~")};e.formatOutput=function(t){var e=t.replace(/~/g,",");return e.split("<br />").join("\n\r")};e.setScroll=function(){e.output.scrollTop=e.output.scrollHeight};e.chooseColor=function(){e.authorColor=randomColor({luminosity:"light"});i.refs.container.style.backgroundColor=e.authorColor;e.update()};e.dontChangeColor=function(t){t.stopPropagation()};RiotControl.on("guestbook_list",function(t){e.messages=t;if(e.isMounted){e.update()}});e.on("mount",function(){RiotControl.trigger("guestbook_init")})});riot.tag2("library",'<div class="library bg-white"> <ul class="list pl0 ma0 overflow-y-auto cf pb4" riot-style="max-height: {parent.style.height}px" name="books"> <li each="{book in books}" class="book w-50 w-third-ns fl"> <a href="{book.amazon}" target="_blank" class="no-underline tc blue db"> <div class="aspect-ratio aspect-ratio--1x1 db mb2"> <img alt="The book cover for {book.name} by {book.author}." riot-src="images/{book.filename}-o.jpg" class="absolute" style="left: 25%; width: 50%; bottom: 0"> </div> <cite class="near-black f6 tc db mb2 link blue">{book.name}</cite> <p class="gray f6 ma0">{book.author}</p> </a> </li> </ul> </div>',"","",function(t){var e=this;this.books=[];this.setScroll=function(){this.output.scrollTop=this.output.scrollHeight};RiotControl.on("library_list",function(t){e.books=t;e.update()});this.on("mount",function(){RiotControl.trigger("library_init")})});riot.tag2("madeiros",'<nav class="bg-white bb bw1" ref="nav"> <ul class="list pl0 pv2 ma0"> <li class="dib ml3 ml4-l i f4-ns f5">madeirOS</li> <li class="dib ml4 f6 f5-ns">File</li> <li class="dib ml4 f6 f5-ns">Edit</li> <li class="dib ml4 f6 f5-ns"><a class="link blue" href="#help">Help</a></li> </ul> </nav> <div class="cf absolute w-100 mt3" style="z-index: 1; top: 50px"> <icons items="{icons}"></Icons> </div> <div role="main" class="cf absolute w-100" style="z-index: 5;"> <app each="{openApps}"></App> </div>',"","",function(t){var e=this;e.localZ=10;e.currentTheme=1;e.onPhone=false;e.apps=_.valuesIn(t.apps);e.icons=_.valuesIn(t.apps);_.remove(e.icons,function(t){return _.has(t,"icon")&&!t.icon});e.openApps=[];e.closeApp=function(t){var i=_.indexOf(e.openApps,t);if(i!=-1){e.openApps.splice(i,1);e.update()}riot.route("/")};e.startApp=function(t){var i=_.find(e.apps,function(e){return e.tagName.toLowerCase()===t});if(typeof i!="undefined"){if(_.indexOf(e.openApps,i)===-1){i.style.z=e.getNextZ();if(e.onPhone){e.openApps=[]}e.openApps.push(i);e.update()}}};e.getNextZ=function(){e.localZ+=1;return e.localZ};e.calculateWindowDimensions=function(){var t=0,e=0;if(typeof window.innerWidth=="number"){t=window.innerWidth;e=window.innerHeight}else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){t=document.documentElement.clientWidth;e=document.documentElement.clientHeight}else if(document.body&&(document.body.clientWidth||document.body.clientHeight)){t=document.body.clientWidth;e=document.body.clientHeight}return{width:t,height:e}};e.reloadData=function(){var t=this;GET("secrets/sourcedata.php",function(e){sourceData=JSON.parse(e);t._allData=sourceData;t.update();riot.update()})};e.checkForPhone=function(){e.mq=window.matchMedia("screen and (min-width: 60em)");if(e.mq.matches){e.onPhone=false}else{e.onPhone=true}};e.fetchArticle=function(t){e.startApp("documents");RiotControl.trigger("load_article",t)};e.setupRoutes=function(){riot.route(function(t){e.startApp(t)});riot.route("writing/*",function(t){e.startApp("writing");e.fetchArticle(t)});if(window.location.hash===""){e.startApp("help")}};e.on("mount",function(){e.checkForPhone();RiotControl.trigger("reload_data");RiotControl.one("data_loaded",function(){e.setupRoutes();riot.route.start(true);e.update()})})});riot.tag2("icons",'<ul role="navigation" class="list pl0 ma0 w-100 w-10-l relative-l fr cf" style="min-width: 150px" each="{apps, i in lists}"> <li class="mb4 fl w-33 tc w-100-l relative-l" each="{apps}"> <a href="/#{tagName.toLowerCase()}" class="no-underline pointer dib"> <div class="center mb2" style="width: 75px;"> <img aria-hidden="true" name="img" class="mw-100" riot-src="icons/{tagName}.png"> </div> <p class="black-80 ma0 fw5 f6 pt1">{name}</p> </a> </li> </ul>',"","",function(t){var e=this.parent;var i=this;i.lists=[];i.fullList=[];i.segmented=[];i.prepareLists=function(){i.fullList.push(t.items);i.segmented.push(_.slice(t.items,0,5));i.segmented.push(_.slice(t.items,5,t.items.length));var a=this;if(!e.onPhone){i.lists=i.segmented}else{i.lists=i.fullList}e.mq.addListener(function(t){if(t.matches){console.log("use segmented list");a.lists=a.segmented;e.onPhone=false}else{console.log("use full list");a.lists=a.fullList;e.onPhone=true}a.update()})};i.on("mount",function(){i.prepareLists();i.update()})});riot.tag2("app",'<article ref="{tagName.toLowerCase()}" class="{!parent.onPhone ? ⁗mw-400⁗ : \'\'} w-100 w-{style.width}-l bl-l br-l bb-l {draggable ? ⁗bt-l⁗ : \'\'} bw1-l b--black absolute-l" riot-style="z-index: {style.z}; left: {style.left}px; top: {style.top}px; right: {style.right}px; opacity: 0.999999;" onclick="{clickFocus}"> <div class="bg-light-gray bb bw1 b--black header" ref="header" id="{name}"> <div class="cf overflow-hidden"> <div class="fl pv2 w-80 w-90-ns {draggable ? ⁗cursor-move⁗ : \'\'}"> <h2 class="ma0 ml3 normal fw4 f6 f5-ns ttu tracked">{name}</h2> </div> <button class="db bg-light-gray fl w-20 w-10-ns tc pv2 bl bw1 br0 b--black bt-0 br-0 bb-0 hover-invert pointer" onclick="{clickClose}" aria-label="Close {name} Window"> <svg class="center f4-ns f5 db icon icon-cross" aria-hidden="true"> <use xlink:href="#icon-cross"></use> </svg> </button> </div> </div> <div class="{style.additionalClasses} overflow-auto" ref="container" riot-style="min-height: {style.height}px; max-height: {style.maxHeight}px"> <div data-is="{tagName}"></div> </div> </article>','app .mw-400,[data-is="app"] .mw-400{ min-width: 400px; }',"",function(t){var e=this.parent;var i=this;this.dragging=false;this.resized=false;this.clickFocus=function(t){var e=this.refs[this.tagName.toLowerCase()];this.style.z=this.parent.getNextZ();if(typeof e!="undefined"&&_.has(e,"clickFocus")){e.clickFocus()}if(this.tagName.toLowerCase()==="documents"){t.preventUpdate=true}};this.clickClose=function(t){t.stopPropagation();t.preventDefault();t.preventUpdate=true;e.closeApp(t.item)};this.calculateAbsolutePosition=function(t){var e=curtop=0;if(t.offsetParent){do{e+=t.offsetLeft;curtop+=t.offsetTop}while(t=t.offsetParent)}return{left:e,top:curtop}};this.handleDrag=function(t){var i=this;if(t.which!=1){return}this.dragging=true;this.style.z=e.getNextZ();var a=this.calculateAbsolutePosition(t.currentTarget);var s=e.calculateWindowDimensions();var o=this.refs[this.tagName.toLowerCase()].clientHeight;var n=this.refs[this.tagName.toLowerCase()].clientWidth;document.body.className="dragging";if(typeof o==="undefined"){var l=this[this.tagName.toLowerCase()];o=l[l.length-1].clientHeight;n=l[l.length-1].clientWidth}var r={left:t.pageX-a.left,top:t.pageY-a.top+41};document.onmouseup=function(){i.dragging=false;document.body.className="";document.onmousemove=null};document.onmousemove=function(t){var e,a,l,c;var u=i.style.left,p=i.style.top;if(!i.dragging){return}if(_.has(t,"originalEvent")){e=t.originalEvent.touches?t.originalEvent.touches[0].pageX:t.pageX;a=t.originalEvent.touches?t.originalEvent.touches[0].pageY:t.pageY}else{e=t.pageX;a=t.pageY}e=e-r.left;a=a-r.top;l=Math.abs(e-u);c=Math.abs(a-p);if(l>=200){return}if(e<=2){e=2}else if(e+n+6>=s.width){e=s.width-n-6}if(a<=2){a=2}else if(a+o+5>=s.height-41){a=s.height-o-47}i.style.left=e;i.style.top=a;i.update()}};this.setDraggable=function(){if(TOUCH_ENABLED){this.refs.header.addEventListener("touchstart",this.handleDrag)}else{this.refs.header.addEventListener("mousedown",this.handleDrag)}};i.setHeight=function(){if(e.onPhone||!i.draggable){var t=e.calculateWindowDimensions();var a=e.refs.nav.clientHeight;var s=i.refs.header.clientHeight;i.style.height=t.height-a-s-4;i.style.maxHeight=t.height-a-s-4;i.update()}};this.on("mount",function(){_.bindAll(this,"handleDrag");if(this.draggable){this.setDraggable()}setTimeout(i.setHeight,5)})});riot.tag2("help",'<article class="help ph3 pb4"> <p class="near-black pt2 lh-copy"><span class="b">Hi! Welcome to <strong class="unicorn animate i fw4">madeirOS</strong> v1.0.</span> (I\'ve worked hard on this, and I\'m very eager to show you.)</p> <p class="near-black pt1 lh-copy">My name is Matt Madeiro. I\'m a web designer, developer, and <a class="link blue" href="#writing">sometimes-writer</a> based in Austin, Texas. This is all my stuff. I hope you like it! <span class="dn di-ns">Click all the things, and don\'t be afraid to move these windows around, too.</span></p> <p class="near-black pt1 lh-copy dn-ns b">To get started, click the big X button in the upper right.</p> <p class="near-black pt1 lh-copy">(Psst. Don\'t forget to sign the <a class="link blue" href="#guestbook">Guest Book</a> before you leave!)</p> </article>',"","",function(t){});riot.tag2("rawhtml","","","",function(t){this.root.innerHTML=this.opts.html;this.on("update",function(){this.root.innerHTML=this.opts.html})});riot.tag2("memories",'<div class="memories overflow-y-auto cf bg-white" riot-style="max-height: {parent.style.height}px"> <div if="{showWarning}"> <div class="pa3 bg-light-gray ma3"> <p class="ma0 mb3 f6 f5-m f5-l lh-copy b">Pictures are heavy.</p> <p class="ma0 f6 f5-m f5-l lh-copy">This section features {imageCount} of them, totaling <strong>{imageWeight} kilobytes of data</strong>. If you\'re on a cellular connection or have an otherwise limited data plan, you might want to save this section for later. If you\'re rocking wifi, though, you do you.</p> </div> <div class="tc mt4 pv2 db cf"> <notbutton title="Just the Text is Fine, Thanks" onclick="{startTheShow}"></NotButton> </div> <div class="tc mt3 mt4-l db cf"> <notbutton title="Show Me the Photos, Please" onclick="{startWithPictures}"></NotButton> </div> </div> <div if="{!showWarning}" class="cf"> <div class="overflow-x-auto overflow-x-visible-ns horizontal-flow nowrap ws-normal-ns mb3"> <ol class="list ma0 pa0 pb1-ns pt1-ns bb b--black-80"> <li each="{year, i in memoryYears}" class="dib"> <button onclick="{changeYear}" class="db bg-white bn pointer f4 pa3 pv2 no-underline link {year === chosenYear ? ⁗black-80⁗ : ⁗black-30⁗}">{year}</button> </li> </ol> </div> <div if="{chosenYear}"> <article class="pa3 pt2 mb3 bb b--black-20 avenir" each="{memory, i in chosenMemories}"> <h1 class="mv2 f4 f3-m f2-l lh-title">{memory.title}</h1> <time class="f5 gray lh-copy mb4">{formatDate(memory.date)}</time> <p class="f5 f4-m f4-l mt4 lh-copy measure"> <rawhtml html="{memory.desc}"></RawHTML> </p> <img if="{showPictures && memory.imgurl !== ⁗false⁗}" riot-src="/images/{memory.imgurl}-o.jpg" class="measure-m measure-l mw-100 mv3"> </article> </div> </div> </div>',"","",function(t){var e=this;e.showWarning=true;e.showPictures=false;e.imageCount=0;e.imageWeight=0;e.allImages=[];e.chosenMemories=[];e.memoryYears=[];e.memoriesByYear={};e.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];e.chosenYear=false;e.setScroll=function(){e.output.scrollTop=e.output.scrollHeight};e.calculateWidth=function(){return e.root.querySelector(".memories").clientWidth+"px"};e.formatDate=function(t){var i=t.split("-");var a=new Date(i[0],i[1]-1,i[2]);return e.monthNames[a.getMonth()]+" "+a.getDate()+", "+i[0]};e.startWithPictures=function(){e.showPictures=true;e.startTheShow()};e.startTheShow=function(){e.showWarning=false;e.update()};e.changeYear=function(t){e.chosenYear=t.item.year;e.chosenMemories=e.memoriesByYear[t.item.year];e.update()};RiotControl.on("memories_list",function(t){var t=_.orderBy(t,"date","desc");e.memoriesByYear=_.groupBy(t,function(t){return t.date.split("-")[0]});e.memoryYears=_.sortBy(_.keys(e.memoriesByYear),function(t){return-1*parseInt(t)});e.chosenYear=e.memoryYears[0];e.chosenMemories=e.memoriesByYear[e.chosenYear];e.chosenMemory=e.chosenMemories[0];e.allImages=_.map(t,function(t){if(t.imgurl!="false"){return t.imgurl}return false});var i=_.map(t,function(t){var i=parseInt(t.imgsize);if(!_.isNaN(i)){e.imageCount+=1;return i}return 0});e.imageWeight=_.sum(i);e.update()});e.on("mount",function(){RiotControl.trigger("memories_init")})});riot.tag2("notbutton",'<button class="ba pa2 ph3 bg-white bw1 b--black tc b f5 pointer hover-invert br0">{opts.title}</button>',"","",function(t){});riot.tag2("terminal",'<div class="terminal" onclick="{clickFocus}"> <ul class="list pl0 ma0 b--none overflow-y-auto mw-100 fw2" style="max-height: 230px" ref="output"> <li each="{msg, i in messages}" class="mb2"> <p class="ma0 mb2 mw-80 f6 lh-copy">{msg}</p> </li> </ul> <form id="input" ref="input" class="pl3 pb3 w-100" onsubmit="{submitMSG}" autocomplete="off"> $&nbsp;<input type="text" ref="cmd" class="terminal white w-90 input-reset bg-transparent b--none" onkeydown="{handleKey}" autofocus> </form> </div>','terminal .terminal,[data-is="terminal"] .terminal{ font: 16px/23px Monaco, Courier, font-monospace; } terminal .blink,[data-is="terminal"] .blink{ animation: blink-empty 1s infinite; border-right: transparent solid 0.5em; } @keyframes blink-empty { 50% {border-right: 0.5em solid #333;} } terminal input:focus,[data-is="terminal"] input:focus{ outline: none; } terminal #input,[data-is="terminal"] #input{ position: absolute; bottom: 0; left: 0; }',"",function(t){var e=this;e.messages=[];e.commands=[];e.currentKeys=[];e.konamiKeys=[38,38,40,40,37,39,37,39,66,65];e.currentCommand=0;e.clickFocus=function(){e.refs.cmd.focus()};e.submitMSG=function(t){var i=e.refs.cmd.value;if(i.length>1){e.commands.push(i);e.currentCommand=e.commands.length;e.sendCommand(i.toLowerCase());e.refs.cmd.value="";e.update();e.setScroll()}t.preventDefault()};e.setScroll=function(){e.refs.output.scrollTop=e.refs.output.scrollHeight};e.sendCommand=function(t){e.currentKeys=[];RiotControl.trigger("terminal_input",t)};e.clearMessages=function(){RiotControl.trigger("terminal_clear")};e.checkKonami=function(t){e.currentKeys.push(t.keyCode);if(e.currentKeys.length===10){if(_.isEqual(e.currentKeys,e.konamiKeys)){e.konami();e.currentKeys=[]}else{e.currentKeys=[]}}};e.konami=function(){RiotControl.trigger("terminal_msg","Oh, you.");e.refs.cmd.value=""};e.handleKey=function(t){e.checkKonami(t);if(t.keyCode===38){e.currentCommand-=1;if(e.currentCommand<0){e.currentCommand=0}e.refs.cmd.value=typeof e.commands[e.currentCommand]!="undefined"?e.commands[e.currentCommand]:""}else if(t.keyCode===40){e.currentCommand+=1;if(e.currentCommand>=e.commands.length){e.currentCommand=e.commands.length-1;e.refs.cmd.value="";return true}e.refs.cmd.value=typeof e.commands[e.currentCommand]!="undefined"?e.commands[e.currentCommand]:""}};RiotControl.on("terminal_command",function(t){e[t]();if(e.isMounted){e.update()}});RiotControl.on("terminal_list",function(t){e.messages=t;if(e.isMounted){e.update()}});e.on("mount",function(){e.refs.cmd.focus();RiotControl.trigger("terminal_init");e.update()})});riot.tag2("tools",'<div class="tools overflow-y-auto cf bg-white" riot-style="max-height: {parent.style.height}px"> <div each="{tool in tools}"> <ul class="list pl0 ma0 cf"> <li class="tool cf w-100 bb b--black-20 pt3"> <a class="link blue pl3 pv3 b f3 f2-ns mt1 mh0 pa0" href="{tool.link}">{tool.title}</a> <p class="ph3 f5">{tool.desc}</p> <p class="gray f6 pl3">{tool.tech}</p> </li> </ul> </div> </div>',"","",function(t){var e=this;e.tools=[];RiotControl.on("tools_list",function(t){e.tools=t;e.update()});e.on("mount",function(){RiotControl.trigger("tools_init")})});riot.tag2("writing",'<div class="writing overflow-y-auto cf bg-white" riot-style="max-height: {parent.style.height}px"> <div class="pa3"> <p class="ma0 bg-light-gray pa3 f5 lh-copy">This is a curated list &mdash; not everything I\'ve written, but the words worth keeping.</p> </div> <div each="{year, i in articleYears}"> <p class="bg-dijon bt bb b--black-50 white pl3 pv1 ma0 f6 fw2">{year}</p> <ul class="list pl0 ma0 cf"> <li each="{article in articlesByYear[year]}" class="article cf w-100 pv2 pv0-ns bb b--black-20"> <a class="link blue lh-title fl w-100 w-80-ns mb0 pl3 pr3 pv2 pv3-ns f5" href="#writing/{article.slug}">{article.title}</a> <span class="db fl w-100 w-20-ns pb2 pb0-ns pv3-ns pl3 pl0-ns pr3 light-silver f6 tr-ns">{formatDate(article.date)} {year}</span> </li> </ul> </div> </div>',"","",function(t){var e=this;this.articles=[];this.articleYears=[];this.articlesByYear={};this.monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];this.calculateHeight=function(){return 500};this.setScroll=function(){this.output.scrollTop=this.output.scrollHeight};this.formatDate=function(t){return this.monthNames[new Date(t).getMonth()]};RiotControl.on("writing_list",function(t){e.articles=_.orderBy(t,"date","desc");e.articlesByYear=_.groupBy(e.articles,function(t){return t.date.split("-")[0]});e.articleYears=_.sortBy(_.keys(e.articlesByYear),function(t){return-1*parseInt(t)});console.log(e.articlesByYear);e.update()});this.on("mount",function(){RiotControl.trigger("writing_init")})});

TOUCH_ENABLED=false;var store=new MadeiroStore;RiotControl.addStore(store);if("ontouchstart"in window){TOUCH_ENABLED=true}riot.mount("MadeirOS",{apps:{Terminal:{name:"Terminal",tagName:"terminal",draggable:true,style:{height:300,width:40,additionalClasses:"bg-dijon white overflow-hidden pa3",left:40,top:40,color:"#E986B8"}},"Guest Book":{name:"Guest Book",tagName:"guestbook",draggable:true,style:{height:450,width:"third",additionalClasses:"bg-white black",left:50,top:50,color:"#85B7E8"}},Library:{name:"Library",tagName:"library",draggable:true,style:{height:500,width:40,additionalClasses:"bg-white",left:60,top:60,color:"#B6E684"}},Contact:{name:"Contact",tagName:"contact",draggable:true,style:{height:500,width:50,additionalClasses:"bg-white",left:70,top:70,color:"#FFF"}},Favorites:{name:"Favorites",tagName:"favorites",draggable:true,style:{height:500,width:25,additionalClasses:"bg-white",left:80,top:80,color:"#EC4A57"}},Writing:{name:"Writing",tagName:"writing",draggable:true,style:{height:500,width:40,additionalClasses:"bg-white",left:90,top:90,color:"#EC4A57"}},Tools:{name:"Tools",tagName:"tools",draggable:true,style:{height:400,width:40,additionalClasses:"bg-white",left:100,top:100,color:"#EC4A57"}},Help:{name:"Help",tagName:"help",draggable:true,icon:false,style:{height:275,width:"third",additionalClasses:"bg-white",left:30,top:30,color:"#EC4A57"}},Memories:{name:"Memories",tagName:"memories",draggable:true,style:{height:600,width:"third",additionalClasses:"bg-white",left:110,top:110,color:"#EC4A57"}},Documents:{name:"Document Viewer",tagName:"documents",icon:false,draggable:false,style:{width:"40",right:0,top:0,additionalClasses:"bg-white"}}}});
