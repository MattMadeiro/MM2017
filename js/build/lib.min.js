function MadeiroStore(){riot.observable(this);var e=this;e.POST=function(e,t,r){var n;n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState==4&&n.status==200){r(n.responseText)}};n.open("POST",e,true);n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");n.send(t)};e.GET=function(e,t){var r;r=new XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState==4&&r.status==200){t(r.responseText)}};r.open("GET",e,true);r.send()};e.stupidCommas=function(e,t,r){return _.map(t,function(t){var n;_.each(r,function(r){n=t[r].split(e);t[r]=n.join(",")});return t})};e.favorites=[];e.guestbook=[];e.library=[];e.writing=[];e.terminal=["Hello, world. Type help for more information."];e.on("reload_data",function(t){e.GET("secrets/sourcedata.php",function(r){sourceData=JSON.parse(r);e.favorites=e.stupidCommas("$",sourceData.favorites,["notes"]);e.guestbook=sourceData.guestbook;e.library=sourceData.library;e.writing=e.stupidCommas("$",sourceData.writing,["title"]);e.tools=e.stupidCommas("$",sourceData.tools,["tech"]);e.memories=e.stupidCommas("~",sourceData.memories,["title","desc"]);e.trigger("guestbook_list",e.guestbook);e.trigger("data_loaded",e.guestbook);if(typeof t!="undefined"){t()}})});e.on("load_article",function(t){var r=_.find(e.writing,{slug:t});if(!_.isNil(r)){e.GET("secrets/data/articles/"+t+".html",function(t){if(t){e.trigger("article_loaded",r.title,r.date,t)}})}else{console.log("Article doesn't exist.");e.trigger("article_loaded",null,null,null)}});e.on("terminal_init",function(){e.trigger("terminal_list",e.terminal)});e.on("terminal_clear",function(){e.terminal=[];e.trigger("terminal_list",e.terminal)});e.on("terminal_msg",function(t){e.terminal.push(t);e.trigger("terminal_list",e.terminal)});e.on("terminal_input",function(t){e.POST("secrets/terminal.php","cmd="+t,function(t){var r=t.split("_");var n=parseInt(r[0]);if(n){e.trigger("terminal_command",r[1])}else{e.terminal.push(r[1]);e.trigger("terminal_list",e.terminal)}})});e.on("tools_init",function(){e.trigger("tools_list",e.tools)});e.on("writing_init",function(){e.trigger("writing_list",e.writing)});e.on("memories_init",function(){e.trigger("memories_list",e.memories)});e.on("library_init",function(){e.trigger("library_list",e.library)});e.on("favorites_init",function(){e.trigger("favorites_list",e.favorites)});e.on("guestbook_init",function(){e.trigger("guestbook_list",e.guestbook)});e.on("guestbook_add",function(t){e.POST("secrets/guestbook-add.php","payload="+JSON.stringify(t),function(t){if(t==="added"){e.trigger("reload_data")}})})}var RiotControl={_stores:[],addStore:function(e){this._stores.push(e)},reset:function(){this._stores=[]}};["on","one","off","trigger"].forEach(function(e){RiotControl[e]=function(){var t=[].slice.call(arguments);this._stores.forEach(function(r){r[e].apply(r,t)})}});if(typeof module!=="undefined")module.exports=RiotControl;(function(e,t){if(typeof define==="function"&&define.amd){define([],t)}else if(typeof exports==="object"){var r=t();if(typeof module==="object"&&module&&module.exports){exports=module.exports=r}exports.randomColor=r}else{e.randomColor=t()}})(this,function(){var e=null;var t={};g();var r=function(t){t=t||{};if(t.seed!==undefined&&t.seed!==null&&t.seed===parseInt(t.seed,10)){e=t.seed}else if(typeof t.seed==="string"){e=v(t.seed)}else if(t.seed!==undefined&&t.seed!==null){throw new TypeError("The seed value must be an integer or string")}else{e=null}var s,u,f;if(t.count!==null&&t.count!==undefined){var l=t.count,c=[];t.count=null;while(l>c.length){if(e&&t.seed)t.seed+=1;c.push(r(t))}t.count=l;return c}s=n(t);u=i(s,t);f=o(s,u,t);return a([s,u,f],t)};function n(e){var t=u(e.hue),r=c(t);if(r<0){r=360+r}return r}function i(e,t){if(t.luminosity==="random"){return c([0,100])}if(t.hue==="monochrome"){return 0}var r=f(e);var n=r[0],i=r[1];switch(t.luminosity){case"bright":n=55;break;case"dark":n=i-10;break;case"light":i=55;break}return c([n,i])}function o(e,t,r){var n=s(e,t),i=100;switch(r.luminosity){case"dark":i=n+20;break;case"light":n=(i+n)/2;break;case"random":n=0;i=100;break}return c([n,i])}function a(e,t){switch(t.format){case"hsvArray":return e;case"hslArray":return p(e);case"hsl":var r=p(e);return"hsl("+r[0]+", "+r[1]+"%, "+r[2]+"%)";case"hsla":var n=p(e);return"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+Math.random()+")";case"rgbArray":return m(e);case"rgb":var i=m(e);return"rgb("+i.join(", ")+")";case"rgba":var o=m(e);return"rgba("+o.join(", ")+", "+Math.random()+")";default:return d(e)}}function s(e,t){var r=l(e).lowerBounds;for(var n=0;n<r.length-1;n++){var i=r[n][0],o=r[n][1];var a=r[n+1][0],s=r[n+1][1];if(t>=i&&t<=a){var u=(s-o)/(a-i),f=o-u*i;return u*t+f}}return 0}function u(e){if(typeof parseInt(e)==="number"){var r=parseInt(e);if(r<360&&r>0){return[r,r]}}if(typeof e==="string"){if(t[e]){var n=t[e];if(n.hueRange){return n.hueRange}}}return[0,360]}function f(e){return l(e).saturationRange}function l(e){if(e>=334&&e<=360){e-=360}for(var r in t){var n=t[r];if(n.hueRange&&e>=n.hueRange[0]&&e<=n.hueRange[1]){return t[r]}}return"Color not found"}function c(t){if(e===null){return Math.floor(t[0]+Math.random()*(t[1]+1-t[0]))}else{var r=t[1]||1;var n=t[0]||0;e=(e*9301+49297)%233280;var i=e/233280;return Math.floor(n+i*(r-n))}}function d(e){var t=m(e);function r(e){var t=e.toString(16);return t.length==1?"0"+t:t}var n="#"+r(t[0])+r(t[1])+r(t[2]);return n}function h(e,r,n){var i=n[0][0],o=n[n.length-1][0],a=n[n.length-1][1],s=n[0][1];t[e]={hueRange:r,lowerBounds:n,saturationRange:[i,o],brightnessRange:[a,s]}}function g(){h("monochrome",null,[[0,0],[100,0]]);h("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]);h("orange",[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]);h("yellow",[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]);h("green",[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]);h("blue",[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]);h("purple",[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]);h("pink",[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function m(e){var t=e[0];if(t===0){t=1}if(t===360){t=359}t=t/360;var r=e[1]/100,n=e[2]/100;var i=Math.floor(t*6),o=t*6-i,a=n*(1-r),s=n*(1-o*r),u=n*(1-(1-o)*r),f=256,l=256,c=256;switch(i){case 0:f=n;l=u;c=a;break;case 1:f=s;l=n;c=a;break;case 2:f=a;l=n;c=u;break;case 3:f=a;l=s;c=n;break;case 4:f=u;l=a;c=n;break;case 5:f=n;l=a;c=s;break}var d=[Math.floor(f*255),Math.floor(l*255),Math.floor(c*255)];return d}function p(e){var t=e[0],r=e[1]/100,n=e[2]/100,i=(2-r)*n;return[t,Math.round(r*n/(i<1?i:2-i)*1e4)/100,i/2*100]}function v(e){var t=0;for(var r=0;r!==e.length;r++){if(t>=Number.MAX_SAFE_INTEGER)break;t+=e.charCodeAt(r)}return t}return r});!function(e){function t(e){return e.split(/[\/?#]/)}function r(e,t){var r=RegExp("^"+t[T](/\*/g,"([^/?#]+?)")[T](/\.\./,".*")+"$"),n=e.match(r);return n?n.slice(1):void 0}function n(e,t){var r;return function(){clearTimeout(r),r=setTimeout(e,t)}}function i(e){h=n(l,1),C[w](R,h),C[w](S,h),E[w](N,c),e&&l(!0)}function o(){this.$=[],e.observable(this),j.on("stop",this.s.bind(this)),j.on("emit",this.e.bind(this))}function a(e){return e[T](/^\/|\/$/,"")}function s(e){return"string"==typeof e}function u(e){return(e||$.href)[T](b,"")}function f(e){return"#"==g[0]?(e||$.href||"").split(g)[1]||"":($?u(e):e||"")[T](g,"")}function l(e){var t,r=0==P;if(!(P>=M)&&(P++,I.push(function(){var t=f();(e||t!=m)&&(j[x]("emit",t),m=t)}),r)){for(;t=I.shift();)t();P=0}}function c(e){if(!(1!=e.which||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){for(var t=e.target;t&&"A"!=t.nodeName;)t=t.parentNode;!t||"A"!=t.nodeName||t[k]("download")||!t[k]("href")||t.target&&"_self"!=t.target||-1==t.href.indexOf($.href.match(b)[0])||(t.href==$.href||!(t.href.split("#")[0]==$.href.split("#")[0]||"#"!=g[0]&&0!==u(t.href).indexOf(g)||"#"==g[0]&&t.href.split(g)[0]!=$.href.split(g)[0])&&d(f(t.href),t.title||E.title))&&e.preventDefault()}}function d(e,t,r){return A?(e=g+a(e),t=t||E.title,r?A.replaceState(null,t,e):A.pushState(null,t,e),E.title=t,G=!1,l(),G):j[x]("emit",f(e))}var h,g,m,p,v,b=/^.+?\/\/+[^\/]+/,y="EventListener",_="remove"+y,w="add"+y,k="hasAttribute",T="replace",R="popstate",S="hashchange",x="trigger",M=3,C="undefined"!=typeof window&&window,E="undefined"!=typeof document&&document,A=C&&history,$=C&&(A.location||C.location),D=o.prototype,N=E&&E.ontouchstart?"touchstart":"click",O=!1,j=e.observable(),G=!1,I=[],P=0;D.m=function(e,t,r){!s(e)||t&&!s(t)?t?this.r(e,t):this.r("@",e):d(e,t,r||!1)},D.s=function(){this.off("*"),this.$=[]},D.e=function(e){this.$.concat("@").some(function(t){var r=("@"==t?p:v)(a(e),a(t));return void 0!==r?(this[x].apply(null,[t].concat(r)),G=!0):void 0},this)},D.r=function(e,t){"@"!=e&&(e="/"+a(e),this.$.push(e)),this.on(e,t)};var q=new o,H=q.m.bind(q);H.create=function(){var e=new o,t=e.m.bind(e);return t.stop=e.s.bind(e),t},H.base=function(e){g=e||"#",m=f()},H.exec=function(){l(!0)},H.parser=function(e,n){e||n||(p=t,v=r),e&&(p=e),n&&(v=n)},H.query=function(){var e={},t=$.href||m;return t[T](/[?&](.+?)=([^&]*)/g,function(t,r,n){e[r]=n}),e},H.stop=function(){O&&(C&&(C[_](R,h),C[_](S,h),E[_](N,c)),j[x]("stop"),O=!1)},H.start=function(e){O||(C&&("complete"==document.readyState?i(e):C[w]("load",function(){setTimeout(function(){i(e)},1)})),O=!0)},H.base(),H.parser(),e.route=H}(riot);